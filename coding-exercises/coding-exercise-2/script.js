
var data = [
    {
        "timestamp": "2022-02-14T14:19:51.790Z",
        "workstudy": 3,
        "watchTheSunset": 2,
        "cleanUpYourMessyTable": 4,
        "stayWithFamilyfriends": 6,
        "readABoringArticle": 1,
        "sleepDream": 8,
        "takeSubway": 3,
        "watchTheAdsOnYoutube": 2,
        "struggleToGetUpInTheMorning": 6,
        "walkOnTheStreetAlone": 2,
        "meetYourProfessorInElevator": 2,
        "appreciateAnArtworkInMuseum": 5
    },
    {
        "timestamp": "2022-02-14T14:23:53.574Z",
        "workstudy": 8,
        "watchTheSunset": 1,
        "cleanUpYourMessyTable": 8,
        "stayWithFamilyfriends": 4,
        "readABoringArticle": 2,
        "sleepDream": 8,
        "takeSubway": 6,
        "watchTheAdsOnYoutube": 2,
        "struggleToGetUpInTheMorning": 8,
        "walkOnTheStreetAlone": 1,
        "meetYourProfessorInElevator": 3,
        "appreciateAnArtworkInMuseum": 1
    },
    {
        "timestamp": "2022-02-14T14:29:55.766Z",
        "workstudy": 7,
        "watchTheSunset": 4,
        "cleanUpYourMessyTable": 3,
        "stayWithFamilyfriends": 8,
        "readABoringArticle": 8,
        "sleepDream": 8,
        "takeSubway": 2,
        "watchTheAdsOnYoutube": 3,
        "struggleToGetUpInTheMorning": 8,
        "walkOnTheStreetAlone": 5,
        "meetYourProfessorInElevator": 4,
        "appreciateAnArtworkInMuseum": 3
    },
    {
        "timestamp": "2022-02-14T14:30:51.609Z",
        "workstudy": 3,
        "watchTheSunset": 6,
        "cleanUpYourMessyTable": 8,
        "stayWithFamilyfriends": 6,
        "readABoringArticle": 1,
        "sleepDream": 8,
        "takeSubway": 3,
        "watchTheAdsOnYoutube": 2,
        "struggleToGetUpInTheMorning": 7,
        "walkOnTheStreetAlone": 5,
        "meetYourProfessorInElevator": 3,
        "appreciateAnArtworkInMuseum": 5
    },
    {
        "timestamp": "2022-02-14T14:42:49.303Z",
        "workstudy": 7,
        "watchTheSunset": 4,
        "cleanUpYourMessyTable": 8,
        "stayWithFamilyfriends": 4,
        "readABoringArticle": 3,
        "sleepDream": 7,
        "takeSubway": 7,
        "watchTheAdsOnYoutube": 3,
        "struggleToGetUpInTheMorning": 3,
        "walkOnTheStreetAlone": 7,
        "meetYourProfessorInElevator": 3,
        "appreciateAnArtworkInMuseum": 7
    },
    {
        "timestamp": "2022-02-14T14:44:16.120Z",
        "workstudy": 6,
        "watchTheSunset": 3,
        "cleanUpYourMessyTable": 6,
        "stayWithFamilyfriends": 6,
        "readABoringArticle": 2,
        "sleepDream": 7,
        "takeSubway": 6,
        "watchTheAdsOnYoutube": 3,
        "struggleToGetUpInTheMorning": 8,
        "walkOnTheStreetAlone": 5,
        "meetYourProfessorInElevator": 3,
        "appreciateAnArtworkInMuseum": 4
    },
    {
        "timestamp": "2022-02-14T14:45:35.263Z",
        "workstudy": 3,
        "watchTheSunset": 6,
        "cleanUpYourMessyTable": 5,
        "stayWithFamilyfriends": 7,
        "readABoringArticle": 1,
        "sleepDream": 3,
        "takeSubway": 5,
        "watchTheAdsOnYoutube": 1,
        "struggleToGetUpInTheMorning": 6,
        "walkOnTheStreetAlone": 4,
        "meetYourProfessorInElevator": 3,
        "appreciateAnArtworkInMuseum": 5
    },
    {
        "timestamp": "2022-02-14T14:54:58.612Z",
        "workstudy": 7,
        "watchTheSunset": 1,
        "cleanUpYourMessyTable": 5,
        "stayWithFamilyfriends": 3,
        "readABoringArticle": 1,
        "sleepDream": 6,
        "takeSubway": 4,
        "watchTheAdsOnYoutube": 1,
        "struggleToGetUpInTheMorning": 1,
        "walkOnTheStreetAlone": 6,
        "meetYourProfessorInElevator": 6,
        "appreciateAnArtworkInMuseum": 2
    },
    {
        "timestamp": "2022-02-14T14:55:21.290Z",
        "workstudy": 7,
        "watchTheSunset": 5,
        "cleanUpYourMessyTable": 3,
        "stayWithFamilyfriends": 6,
        "readABoringArticle": 2,
        "sleepDream": 4,
        "takeSubway": 4,
        "watchTheAdsOnYoutube": 3,
        "struggleToGetUpInTheMorning": 5,
        "walkOnTheStreetAlone": 2,
        "meetYourProfessorInElevator": 5,
        "appreciateAnArtworkInMuseum": 3
    },
    {
        "timestamp": "2022-02-14T14:57:13.584Z",
        "workstudy": 5,
        "watchTheSunset": 3,
        "cleanUpYourMessyTable": 5,
        "stayWithFamilyfriends": 4,
        "readABoringArticle": 4,
        "sleepDream": 8,
        "takeSubway": 3,
        "watchTheAdsOnYoutube": 3,
        "struggleToGetUpInTheMorning": 7,
        "walkOnTheStreetAlone": 3,
        "meetYourProfessorInElevator": 1,
        "appreciateAnArtworkInMuseum": 3
    },
    {
        "timestamp": "2022-02-14T14:58:49.942Z",
        "workstudy": 6,
        "watchTheSunset": 4,
        "cleanUpYourMessyTable": 5,
        "stayWithFamilyfriends": 7,
        "readABoringArticle": 4,
        "sleepDream": 7,
        "takeSubway": 6,
        "watchTheAdsOnYoutube": 4,
        "struggleToGetUpInTheMorning": 5,
        "walkOnTheStreetAlone": 4,
        "meetYourProfessorInElevator": 3,
        "appreciateAnArtworkInMuseum": 3
    },
    {
        "timestamp": "2022-02-14T15:03:01.753Z",
        "workstudy": 7,
        "watchTheSunset": 8,
        "cleanUpYourMessyTable": 6,
        "stayWithFamilyfriends": 8,
        "readABoringArticle": 4,
        "sleepDream": 8,
        "takeSubway": 6,
        "watchTheAdsOnYoutube": 3,
        "struggleToGetUpInTheMorning": 8,
        "walkOnTheStreetAlone": 4,
        "meetYourProfessorInElevator": 2,
        "appreciateAnArtworkInMuseum": 4
    },
    {
        "timestamp": "2022-02-14T15:06:42.113Z",
        "workstudy": 8,
        "watchTheSunset": 4,
        "cleanUpYourMessyTable": 7,
        "stayWithFamilyfriends": 8,
        "readABoringArticle": 1,
        "sleepDream": 8,
        "takeSubway": 5,
        "watchTheAdsOnYoutube": 1,
        "struggleToGetUpInTheMorning": 5,
        "walkOnTheStreetAlone": 3,
        "meetYourProfessorInElevator": 1,
        "appreciateAnArtworkInMuseum": 5
    },
    {
        "timestamp": "2022-02-14T15:20:06.340Z",
        "workstudy": 6,
        "watchTheSunset": 4,
        "cleanUpYourMessyTable": 6,
        "stayWithFamilyfriends": 7,
        "readABoringArticle": 1,
        "sleepDream": 8,
        "takeSubway": 3,
        "watchTheAdsOnYoutube": 2,
        "struggleToGetUpInTheMorning": 8,
        "walkOnTheStreetAlone": 4,
        "meetYourProfessorInElevator": 2,
        "appreciateAnArtworkInMuseum": 4
    },
    {
        "timestamp": "2022-02-14T15:28:24.207Z",
        "workstudy": 6,
        "watchTheSunset": 8,
        "cleanUpYourMessyTable": 5,
        "stayWithFamilyfriends": 6,
        "readABoringArticle": 1,
        "sleepDream": 4,
        "takeSubway": 2,
        "watchTheAdsOnYoutube": 3,
        "struggleToGetUpInTheMorning": 8,
        "walkOnTheStreetAlone": 5,
        "meetYourProfessorInElevator": 8,
        "appreciateAnArtworkInMuseum": 4
    },
    {
        "timestamp": "2022-02-14T15:31:21.456Z",
        "workstudy": 8,
        "watchTheSunset": 5,
        "cleanUpYourMessyTable": 6,
        "stayWithFamilyfriends": 6,
        "readABoringArticle": 1,
        "sleepDream": 8,
        "takeSubway": 4,
        "watchTheAdsOnYoutube": 1,
        "struggleToGetUpInTheMorning": 8,
        "walkOnTheStreetAlone": 5,
        "meetYourProfessorInElevator": 1,
        "appreciateAnArtworkInMuseum": 6
    },
    {
        "timestamp": "2022-02-14T15:33:07.447Z",
        "workstudy": 1,
        "watchTheSunset": 5,
        "cleanUpYourMessyTable": 5,
        "stayWithFamilyfriends": 8,
        "readABoringArticle": 1,
        "sleepDream": 7,
        "takeSubway": 2,
        "watchTheAdsOnYoutube": 2,
        "struggleToGetUpInTheMorning": 7,
        "walkOnTheStreetAlone": 4,
        "meetYourProfessorInElevator": 2,
        "appreciateAnArtworkInMuseum": 3
    },
    {
        "timestamp": "2022-02-14T15:50:56.443Z",
        "workstudy": 8,
        "watchTheSunset": 1,
        "cleanUpYourMessyTable": 1,
        "stayWithFamilyfriends": 6,
        "readABoringArticle": 1,
        "sleepDream": 8,
        "takeSubway": 1,
        "watchTheAdsOnYoutube": 1,
        "struggleToGetUpInTheMorning": 1,
        "walkOnTheStreetAlone": 7,
        "meetYourProfessorInElevator": 7,
        "appreciateAnArtworkInMuseum": 1
    },
    {
        "timestamp": "2022-02-14T15:51:35.199Z",
        "workstudy": 7,
        "watchTheSunset": 8,
        "cleanUpYourMessyTable": 4,
        "stayWithFamilyfriends": 6,
        "readABoringArticle": 1,
        "sleepDream": 3,
        "takeSubway": 5,
        "watchTheAdsOnYoutube": 2,
        "struggleToGetUpInTheMorning": 2,
        "walkOnTheStreetAlone": 5,
        "meetYourProfessorInElevator": 3,
        "appreciateAnArtworkInMuseum": 3
    },
    {
        "timestamp": "2022-02-14T16:28:15.792Z",
        "workstudy": 8,
        "watchTheSunset": 3,
        "cleanUpYourMessyTable": 6,
        "stayWithFamilyfriends": 6,
        "readABoringArticle": 1,
        "sleepDream": 6,
        "takeSubway": 3,
        "watchTheAdsOnYoutube": 7,
        "struggleToGetUpInTheMorning": 8,
        "walkOnTheStreetAlone": 3,
        "meetYourProfessorInElevator": 6,
        "appreciateAnArtworkInMuseum": 4
    }
]
var activities=["Work & Study","Watch the sunset","Clear a messy desk","Stay with family /friends","Read a boring article","Sleep & Dream","Take subway","Wacth the ads on Youtube","Struggle to get up in the morning","Walk on the street alone","Meet your professor in elevator",
"Appreciate an artwork in museum"];
function averageData(data){
    var newData = [];
    var keys = Object.keys(data[ data.length-1 ]);
    for(var i = 0; i < keys.length; i++){
      var key = keys[i];
      let sum = 0;
      let num = 0;
      for(let j = 0; j < data.length; j++){
        let datum = data[j];
        if(key in datum){
          sum += datum[key];
          num++;
        }
      }
      let avg = sum/num;
      if(!isNaN(avg)){
        let newDataPoint = {"name": key, "average": avg, 'numMeasurements': num};
        newData.push(newDataPoint);
      }
    }
    return newData;
  }

  function mapValue (n, start1, stop1, start2, stop2) {
    return ((n-start1)/(stop1-start1))*(stop2-start2)+start2;
  };
  
  let transformedData = averageData(data);
  console.log(transformedData);
  let flexContainer=document.getElementById("flex-container");

  for(let i = 0; i < transformedData.length; i++){
    
    let datapoint = transformedData[i];
    let average = datapoint.average;
    let flexItem = document.createElement("div");
    
    flexItem.className = "flex-item";

    let rotateBox= document.createElement("div");
    rotateBox.className = "rotateBox";
    let colorValue=Math.floor(Math.random()*50);
    rotateBox.style.backgroundColor="hsl("+colorValue+", 80%, 70%)";

    let speed=mapValue(average,2,7,10,2);
    rotateBox.style.animationDuration = speed +"s";
    let activityName = document.createElement("p");
    activityName.className="title";
    
    activityName.innerHTML = activities[i];
    flexItem.appendChild(rotateBox);
    flexItem.appendChild(activityName);
    flexContainer.appendChild(flexItem);
  }